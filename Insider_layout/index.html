<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prova</title>
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
   <style>

    #scrolly {
        position: relative;
        background-color: #fff8f0;
        padding: 1rem;
    }

    article {
        position: relative;
        padding: 0;
        max-width: 20rem;
        margin: 0 auto;
    }

    figure {
        position: -webkit-sticky;
        position: sticky;
        left: 0;
        width: 100%;
        margin: 0;
        -webkit-transform: translate3d(0, 0, 0);
        -moz-transform: translate3d(0, 0, 0);
        transform: translate3d(0, 0, 0);
        background-color: #fff8f0;
        z-index: 0;
    }

    figure iframe {
        text-align: center;
        padding: 1rem;
        position: absolute;
        
        width: 130%;
        height: 130%;
        left: 50%;
        top: 50%;
        -moz-transform: translate(-50%, -50%);
        -webkit-transform: translate(-50%, -50%);
        transform: translate(-50%, -50%);
        font-size: 8rem;
        font-weight: 900;
        color: #fff;
    }

    .step2 {
        margin: 0 auto 2rem auto;
        color: #fff;
        /*background-color:#fff8f0;*/
    }

    .step2:last-child {
        margin-bottom: 0;
    }

    .ste2.is-active p {
        background-color: goldenrod;
        color: #3b3b3b;
    }

    .step2 p {
        text-align: center;
        padding: 1rem;
        font-size: 1.5rem;
        background-color: #3b3b3b;
    }
</style>
</head>
<body>
    <body data-k5a-trackerid="toolbar-0">

        </div> -->
        <!-- Header ======================================================== -->
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="https://lab24.ilsole24ore.com/hf/css/hf.css?v1.00004">
        <link rel="stylesheet" href="style.css">
        <link rel="stylesheet" href="style1.css">
        
        <script>
            document.getElementById("nav-sole").click(function(){
                var win = window.open("https://www.ilsole24ore.com", "_blank");
                })
            document.getElementById("nav-lab").click(function(){
                var win = window.open("https://lab24.ilsole24ore.com", "_blank");
                })
        </script>
        <!-- /Header ======================================================== -->

        <!-- Content ======================================================= -->
    
    
    <div class="container_over_skin shrinkable">

            <header>
                <div class="title">
                    <h1>Lorem ipsum dolor sit amet</h1>
                </div>
                <div class="sommario">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</div>
                <div class="mese_istat">Lorem ipsum dolor sit amet</div>
            </header>
    
    
            <section>
                <div class="box_testo" id="first_paragraph">
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
    
    
            </section>
    
            <section>
                <div class="box_grafico_titolazione">
                    <h3 class="grafico_titolo">Lorem ipsum dolor sit amet, consectetur </h3>
                    <p class="grafico_sommario">Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
                </div>
                <div class="box_grafico">
                    <iframe src="http://www.utility.ilsole24ore.com/charts24/2022/06/8120/frame.shtml" frameborder="0" scrolling="no" style="width:100%;height:450px;"></iframe>
                </div>
                <div class="box_testo">
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
    
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
    
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                </div>
            </section>

            <!--scrollytelling part-->
            
                <div class="container-fluid" id="root">
                    <div class="row justify-content-center" id="scrolly__section">
                        <div class="col-4 scrolly__content">
                            <div class="step" data-step="1">
                                <div class="text-block pa-2">
                                    <p class="text-body-2">Lorem 1</p>
                                    <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Accusantium debitis modi labore unde commodi, dolorem ut enim, necessitatibus odit facere et pariatur minus! Aliquam rem earum tempore accusamus corporis similique.</p>
                                </div>
                            </div>
                <div class="step" data-step="2">
                <div class="text-block pa-2">
                <p class="text-body-2">Lorem 2</p>
                <p class="text-body-2">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Accusantium debitis modi labore unde commodi, dolorem ut enim, necessitatibus odit facere et pariatur minus! Aliquam rem earum tempore accusamus corporis similique.</p>
                </div>            
                </div>
                <div class="step" data-step="3">
                <div class="text-block pa-2">
                <p class="text-body-2">Lorem 3</p>
                <p class="text-body-2">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Accusantium debitis modi labore unde commodi, dolorem ut enim, necessitatibus odit facere et pariatur minus! Aliquam rem earum tempore accusamus corporis similique.</p>
                </div>            
                </div>
                <div class="step" data-step="4">
                <div class="text-block pa-2">
                <p class="text-body-2">Lorem 4</p>
                <p class="text-body-2">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Accusantium debitis modi labore unde commodi, dolorem ut enim, necessitatibus odit facere et pariatur minus! Aliquam rem earum tempore accusamus corporis similique.</p>
                </div>            
                </div>
                </div>
                <div class="col-6 scrolly__chart">
                <iframe scrolling="no" src="https://flo.uri.sh/story/872914/embed#slide-0"></iframe>
                </div>
                </div>        
                </div>

                <section>
                    <div class="box_grafico_titolazione">
                        <h3 class="grafico_titolo">Lorem ipsum dolor sit amet, consectetur </h3>
                        <p class="grafico_sommario">Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
                    </div>
                    <div class="box_grafico">
                        <iframe src="http://www.utility.ilsole24ore.com/charts24/2022/06/8120/frame.shtml" frameborder="0" scrolling="no" style="width:100%;height:450px;"></iframe>
                        <p class="grafico_fonte">Fonte: Istat</p>
                    </div>
                    <div class="box_testo">
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                    </div>
                </section>
                <br>
                <!--secondo scrollytelling-->
                <main>
                    <br>
                    <br>
                    <section id="scrolly">
                        <figure>
                            <iframe scrolling="no" src="https://flo.uri.sh/story/872914/embed#slide-0"></iframe>
                        </figure>
            
                        <article>
                            <div class="step2" data-step="1">
                                <p>STEP 1</p>
                            </div>
                            <div class="step2" data-step="2">
                                <p>STEP 2</p>
                            </div>
                            <div class="step2" data-step="3">
                                <p>STEP 3</p>
                            </div>
                            <div class="step2" data-step="4">
                                <p>STEP 4</p>
                            </div>
                        </article>
                    </section>
            
                    <section id="outro"></section>
                </main>
                
        <br>
        <br>
        <br>
        
        <section>
            <div class="box_grafico_titolazione">
                <h3 class="grafico_titolo">Lorem ipsum dolor sit amet, consectetur </h3>
                <p class="grafico_sommario">Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
            </div>
            <div class="box_grafico">
                <iframe src="http://www.utility.ilsole24ore.com/charts24/2022/06/8120/frame.shtml" frameborder="0" scrolling="no" style="width:100%;height:450px;"></iframe>
                
            </div>
            <div class="box_testo">
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
            </div>
        </section>
 
    
    
    </div><!-- END CONTAINER OVER SKIN -->
    
    
    
    <div id="backtop" onclick="topFunction()">
        <img src="img/backtop.svg" alt="Torna all'indice">
    </div>
    
    
    <script>
        const mobileWidth = window.matchMedia("(max-width: 480px)");
        const mobileTabletWidth = window.matchMedia("(max-width: 800px)");
        const pink = "#f72585";
        const light_blue = "#4cc9f0";
        const dark_blue = "#4361ee";
        const light_brown = "#D9D3CC";
        const dark_brown = "#b1ada8";
        let box_inflazione;
        let is_started = false;
    
        if (mobileWidth.matches) {
            box_inflazione = document.querySelector(".box_inflazione.mobile");
        } else {
            box_inflazione = document.querySelector(".box_inflazione.desktop");
        }
    </script>
    <script src="js/main.js?v=127178"></script>
    <script src="./js/calc-index.js?v=127178"></script>
    <script src="./js/calc-card.js?v=127178"></script><iframe src="https://5db18d8dcb4d4f24e43326d3a90c201f.safeframe.googlesyndication.com/safeframe/1-0-38/html/container.html" style="visibility: hidden; display: none;"></iframe>
    <script src="./js/calc-calculate.js?v=127178"></script>
    <script src="./js/calc-chart.js?v=127178"></script>
    
    
    <!------ FOOTER -------->
    <footer>

    </footer>

    <!--Javascript part--->
    
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>
<script src="https://unpkg.com/d3@5.9.1/dist/d3.min.js"></script>
<script src="https://unpkg.com/intersection-observer"></script>
<script src="https://unpkg.com/scrollama"></script>    
<script src="https://public.flourish.studio/resources/embed.js"></script>
<script src="main.js"></script>
<!-- This code from here on is derived from the side-by-side code example from the scrollama library which can be found here: https://github.com/russellgoldenberg/scrollama  -->
<!-- I tweaked the function for handleStepEnter to accomodate the Flourish story! -->
<script>
    // using d3 for convenience
    var main = d3.select("main");
    var scrolly = main.select("#scrolly");
    var figure = scrolly.select("figure");
    var article = scrolly.select("article");
    var step = article.selectAll(".step2");

    // initialize the scrollama
    var scroller = scrollama();

    // generic window resize listener event
    function handleResize() {
        // 1. update height of step elements
        var stepH = Math.floor(window.innerHeight * 0.75);
        step.style("height", stepH + "px");

        var figureHeight = window.innerHeight / 2;
        var figureMarginTop = (window.innerHeight - figureHeight) / 2;

        figure
            .style("height", figureHeight + "px")
            .style("top", figureMarginTop + "px");

        // 3. tell scrollama to update new element dimensions
        scroller.resize();
    }

    // scrollama event handlers
    function handleStepEnter(response) {
        console.log(response);
        // response = { element, direction, index }

        // add color to current step only
        step.classed("is-active", function (d, i) {
            return i === response.index;
        });

        // update graphic based on step
        const linkHead = 'https://flo.uri.sh/story/1677506/embed#slide-'
        const slide = response.index

        figure.select("iframe").attr('src', linkHead + slide);
    }


    function init() {

        // 1. force a resize on load to ensure proper dimensions are sent to scrollama
        handleResize();

        // 2. setup the scroller passing options
        // 		this will also initialize trigger observations
        // 3. bind scrollama event handlers (this can be chained like below)
        scroller
            .setup({
                step: "#scrolly article .step2",
                offset: 0.33,
                debug: true
            })
            .onStepEnter(handleStepEnter);
    }

    // kick things off
    init();
</script>
  
    
    
</body>
</html>